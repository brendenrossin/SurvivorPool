{
  "permissions": {
    "allow": [
      "Bash(python test_nfl_only.py:*)",
      "Bash(python test_sheets_only.py:*)",
      "Bash(python:*)",
      "Bash(PORT=8531 DATABASE_URL=\"postgresql://postgres:***REMOVED***@ballast.proxy.rlwy.net:35616/railway\" python -c \"\nfrom api.database import SessionLocal\nfrom api.models import Pick, PickResult, Player, Game\nfrom sqlalchemy import and_\n\ndb = SessionLocal()\n\n# Get elimination events by week\nprint()\nprint(''üìÖ WEEK-BY-WEEK BREAKDOWN:'')\nprint(''='' * 60)\n\nfor week in range(1, 6):\n    # Get all games for this week\n    games = db.query(Game).filter(Game.week == week, Game.season == 2025).all()\n    \n    if not games:\n        print(f''\\nWeek {week}: No game data yet'')\n        continue\n    \n    # Count eliminations this week\n    week_eliminations = db.query(Pick.player_id).join(PickResult).filter(\n        Pick.week == week,\n        Pick.season == 2025,\n        PickResult.survived == False\n    ).distinct().count()\n    \n    # Count picks this week\n    week_picks = db.query(Pick).filter(\n        Pick.week == week,\n        Pick.season == 2025,\n        Pick.team_abbr.isnot(None)\n    ).count()\n    \n    print(f''\\nüèà Week {week}: {week_eliminations} eliminations from {week_picks} picks'')\n    \n    # Find losing teams\n    losing_teams = db.query(\n        Pick.team_abbr,\n        PickResult.survived.label(''survived'')\n    ).join(PickResult).filter(\n        Pick.week == week,\n        Pick.season == 2025,\n        Pick.team_abbr.isnot(None)\n    ).all()\n    \n    from collections import defaultdict\n    team_results = defaultdict(lambda: {''survived'': 0, ''eliminated'': 0})\n    \n    for team, survived in losing_teams:\n        if survived:\n            team_results[team][''survived''] += 1\n        else:\n            team_results[team][''eliminated''] += 1\n    \n    # Show teams with eliminations\n    elim_teams = [(team, stats[''eliminated''], stats[''survived''] + stats[''eliminated'']) \n                  for team, stats in team_results.items() \n                  if stats[''eliminated''] > 0]\n    elim_teams.sort(key=lambda x: x[1], reverse=True)\n    \n    if elim_teams:\n        print(''  Elimination Teams:'')\n        for team, elims, total in elim_teams:\n            print(f''    üíÄ {team}: {elims}/{total} eliminated'')\n\n# Check for missing picks (auto-eliminations)\nprint()\nprint(''‚ö†Ô∏è  AUTO-ELIMINATIONS (Missing Picks):'')\nprint(''='' * 60)\n\nauto_elims = db.query(Pick, Player.display_name).join(Player).filter(\n    Pick.season == 2025,\n    Pick.team_abbr == None,\n    Pick.source == ''auto_elimination''\n).all()\n\nif auto_elims:\n    for pick, name in auto_elims:\n        print(f''  Week {pick.week}: {name}'')\nelse:\n    print(''  None'')\n\ndb.close()\n\")"
    ],
    "deny": [],
    "ask": []
  }
}